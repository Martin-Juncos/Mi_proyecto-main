<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Formulario de Usuario</title>
  </head>
  <body>
    <h1>Crear Usuario</h1>
    <form id="userForm">
      <label for="name">Nombre:</label>
      <input type="text" id="name" name="name" required /><br />
      <br />
      <label for="userName">Usuario:</label>
      <input type="text" id="userName" name="userName" required /><br />
      <br />
      <label for="email">Correo:</label>
      <input type="email" id="email" name="email" required /><br />
      <br />
      <button type="submit">Enviar</button>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      const form = document.getElementById("userForm");

      document.getElementById("name").value = "Juan";
      document.getElementById("userName").value = "JuanUser";
      document.getElementById("email").value = "juan@correo.com";

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const userData = {
          name: document.getElementById("name").value,
          userName: document.getElementById("userName").value,
          email: document.getElementById("email").value,
        };

        console.log("Datos a enviar:", userData);
        try {
          const response = await axios.post(
            "http://localhost:3001/api/user",
            userData
          );
          console.log("Respuesta del servidor:", response.data);
          alert("Usuario creado correctamente");

          document.getElementById("name").value = "";
          document.getElementById("userName").value = "";
          document.getElementById("email").value = "";
        } catch (error) {
          console.error(
            "Error en la petici√≥n:",
            error.response?.data || error.message
          );
          alert("Error al crear usuario");
        }
      });
    </script>
  </body>
</html>
